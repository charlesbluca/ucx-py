on:
  push:
    branches: ["gha-docs-build"]

jobs:
  build:
    name: Build Sphinx documentation
    runs-on: "ubuntu-latest"
    defaults:
      run:
        shell: bash -l {0}
    steps:
      - name: Checkout repository
        uses: actions/checkout@v2.3.4
      - name: Install libnuma
        run: |
          sudo apt-get update -y
          sudo apt-get install -y libnuma-dev
      - name: Create docs environment
        uses: conda-incubator/setup-miniconda@v2
        with:
          activate-environment: ucx_dev
          environment-file: conda/environments/builddocs_py37.yml
          auto-activate-base: false
      - name: Check conda env
        run: |
          conda info
          conda list
      # - name: Build documentation
      #   run: |
      #     conda activate ucx_dev
      #     cd docs
      #     make html