name: Update readthedocs branch

on:
  push:
    branches: ["rtd-update-workflow"]

jobs:
  update:
    name: Update readthedocs branch
    runs-on: "ubuntu-latest"
    steps:
      - name: Checkout readthedocs
        uses: actions/checkout@v2.3.4
        with:
          ref: readthedocs
          fetch-depth: 0
      - name: Merge upstream changes
        run: |
          git fetch origin
          git merge origin/branch-0.20
          git push